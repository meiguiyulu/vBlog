
## BeanUtils.copyProperties
不能用于List类型
```java
        List<Article> records = selectPage.getRecords();
        List<ArticleVo> articleVos = new ArrayList<>();
        for (Article record : records) {
        ArticleVo articleVo = new ArticleVo();
        BeanUtils.copyProperties(record, articleVo);
        articleVos.add(articleVo);
        }
        
        // BeanUtils.copyProperties(records, articleVos);这样是不行的
```
## 热门标签

这里是通过查询数据库得到的：

`TagController`

```java
@RestController
@RequestMapping("/tags")
public class TagController {

    @Autowired
    private ITagService tagService;

    @GetMapping("hot")
    public Result hotTags(){
        /*前6个最热标签*/
        int limit = 6;
        List<Tag> tagList = tagService.findHotTags(limit);
        return Result.success(tagList);
    }

}
```

`TagServiceImpl`

```java
@Service
public class TagServiceImpl extends ServiceImpl<TagMapper, Tag> implements ITagService {

    @Autowired
    private TagMapper tagMapper;

    @Override
    public List<TagVo> findTagsByArticleId(Long id) {
        return tagMapper.findTagsByArticleId(id);
    }

    @Override
    public List<Tag> findHotTags(int limit) {
        /*这里可以直接一条sql语句多表查询也可
        * select
        from ms_tag
        where id in (
            select tag_id
            from (select tag_id
                  from ms_article_tag
                  group by tag_id
                  order by count(tag_id) desc
                  limit 6)
                     as t
        );
        */

        List<Long> hotTagIds = tagMapper.findHotTagsIds(limit);
        if (hotTagIds.isEmpty()) {
            return Collections.emptyList();
        }
//        System.out.println("hotTagIds: " + hotTagIds);

        List<Tag> tags = tagMapper.selectBatchIds(hotTagIds);
        return tags;
    }
}
```

`TagMapper`

```xml
    <select id="findHotTagsIds" resultType="Long">
        select tag_id
        from ms_article_tag
        group by tag_id
        order by count(tag_id) desc
            limit #{limit}
    </select>
```

## 统一异常处理

```java
@RestControllerAdvice // 返回JSON数据
public class MyExceptionHandler {

    @ExceptionHandler(Exception.class)
    public Result doException(Exception exception) {
        exception.printStackTrace();
        return Result.fail(-999, "系统异常");
    }
}
```

## 文章归类

```mysql
select year(create_date) as year, month(create_date) as month, count(*) as count
from ms_article
group by year, month
```

```xml
<select id="listArchives" resultType="com.lyj.vblog.dos.Archives">
    select year(create_date) as year, month(create_date) as month, count(*) as count
    from ms_article
    group by year, month
</select>
```

## Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError:

```xml
        <!--解决Handler dispatch failed;nested exception is java.lang.NoClassDefFoundError: javax/xml/bind/DatatypeConverter-->
        <dependency>
            <groupId>javax.xml.bind</groupId>
            <artifactId>jaxb-api</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-impl</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>com.sun.xml.bind</groupId>
            <artifactId>jaxb-core</artifactId>
            <version>2.3.0</version>
        </dependency>
        <dependency>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
            <version>1.1.1</version>
        </dependency>
```

